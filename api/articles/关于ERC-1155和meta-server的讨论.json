{"title":"关于ERC-1155和meta server的讨论","slug":"关于ERC-1155和meta-server的讨论","date":"2022-03-24T01:23:24.000Z","updated":"2022-03-24T01:23:29.000Z","comments":true,"path":"api/articles/关于ERC-1155和meta-server的讨论.json","excerpt":"garfield550这是两个部分了，游戏开发者确实要与我们的合约做一次交互，它才能被别人打赏。或者购买。WhyYouAre是的主要是让买的时候的支付要能给创作者garfield55...","covers":null,"content":"<p><strong>garfield550</strong></p>\n<p>这是两个部分了，游戏开发者确实要与我们的合约做一次交互，它才能被别人打赏。</p>\n<p>或者购买。</p>\n<p><strong>WhyYouAre</strong></p>\n<p>是的</p>\n<p>主要是让买的时候的支付要能给创作者</p>\n<p><strong>garfield550</strong></p>\n<p>嗯，是。**</p>\n<p><strong>WhyYouAre</strong></p>\n<p>如果游戏名/id 这个关键信息只在服务器，就有黑幕了</p>\n<p>所以一定要在合约的</p>\n<p>就是原始意义的以游戏为单位的账本</p>\n<p>另外如果用 1155，确认一下 metadataURI 指到什么地方</p>\n<p>常见的做法那个 id 是个自增的东西吧</p>\n<p><strong>garfield550</strong></p>\n<p>是自增。</p>\n<p><strong>WhyYouAre</strong></p>\n<p>确定这些东西能满足我们需求的话，剩下的部分应该是有比较成熟的方案，能串起来就好了</p>\n<p><strong>garfield550</strong></p>\n<p>嗯，下周调研和应用这些。</p>\n<p>这周剩下的时间我去看看那些 NFT 1155 的平台是怎么做的。</p>\n<p>对 1155 的一些需要的东西整理一下，比如合约结构， metadata server 之类的。</p>\n<p><strong>WhyYouAre</strong></p>\n<p>签出 jwt 的时候 aud 按 nft 情况来</p>\n<p><strong>这个再加上 refresh 机制 + 监听事件的话，aud 也能算比较实时了。jwt 可以设置得有效期特别短。比如 1 分钟，就算把 NFT 卖了，确实还能多访问到 1 分钟，在这个场景下也还可以接受</strong></p>\n<p><strong>garfield550</strong></p>\n<p>1 分钟属实有点短。**</p>\n<p><strong>WhyYouAre</strong></p>\n<p>这个模式如果改出类似订阅制，就是发有效期和订阅周期匹配的 jwt 就行</p>\n<blockquote>\n<p><a href=\"https://matrix.to/#/!ubeXIjrjxOOHqRyCaI:matrix.org/$D4nj9p6vVj8dDzhkEbxTCkUCNn0_dvdotQlu1PBUBnY?via=matrix.org\">garfield550<strong>1 分钟属实有点短。</strong></a></p>\n</blockquote>\n<p><strong>是，举个比较极端的例子</strong></p>\n<p>一般的 15～30 分钟在这个场景下也没所谓的，其实让玩家卖了还能玩一会儿未必是什么坏事</p>\n<p>** garfield550 **</p>\n<p>对 1155 的一些需要的东西整理一下，比如合约结构， metadata server 之类的。</p>\n<p>metadata-server 如果挂了 metadata 就拿不到也挺那啥的了。所以应该是能通过某种治理修改，然后实现是开源的 gateway</p>\n<p><strong>garfield550</strong></p>\n<p>我印象里别人的实现就是一个 ID 对应 IPFS CID 的表。**</p>\n<p><strong>WhyYouAre</strong></p>\n<blockquote>\n<p><a href=\"https://matrix.to/#/!ubeXIjrjxOOHqRyCaI:matrix.org/$rmg8Zjh4P_FY2u95TajIbY1_8DKSw3EovDy7_U_znd4?via=matrix.org\">garfield550<strong>我印象里别人的实现就是一个 ID 对应 IPFS CID 的表。</strong></a></p>\n</blockquote>\n<p>应该是。gateway 只负责 map 到 IPFS/arweave 这样永在网。比如 W3ITCH 交给社区/DAO 了，投票决定用 metadata.w3itch.xyz 之类的了，产生修改了，然后社区去把这个服务器搭起来，DNS 啥的搞好</p>\n<p><strong>garfield550</strong></p>\n<p>metadata 是 IPFS 的 CID 存储的，然后 metadata-server 是一个按照 1155 ID 匹配 CID 的服务器。</p>\n<p><strong>WhyYouAre</strong></p>\n<p>而且这个信息是可以一直公开的</p>\n<blockquote>\n<p><a href=\"https://matrix.to/#/!ubeXIjrjxOOHqRyCaI:matrix.org/$X3sE8cOIzpHY85-mCtG_83c6CqzUTz_p4tnt-NWW7Xk?via=matrix.org\">garfield550<strong>metadata 是 IPFS 的 CID 存储的，然后 metadata-server 是一个按照 1155 ID 匹配 CID 的服务器。</strong></a></p>\n</blockquote>\n<p><strong>是</strong></p>\n<p>只是因为链不好做索引所以需要这种服务器，里面的 id-&gt;cid 数据公开也是正常的 🤔</p>\n<p><strong>garfield550</strong></p>\n<p>虽然 maven 的 metadata 是在 MySQL 里的（</p>\n<p><strong>WhyYouAre</strong></p>\n<p>比如 id-&gt;cid 同时也写到链里去了，服务器本身开源，初始化的时候从链数据重新构建数据库/缓存也是可以的</p>\n<p>这样其实另外搭建和 1155 配套的 metadata server 都是可以的，只是合约里的 metadataURI 没指过来而已</p>\n","more":"<p><strong>garfield550</strong></p>\n<p>这是两个部分了，游戏开发者确实要与我们的合约做一次交互，它才能被别人打赏。</p>\n<p>或者购买。</p>\n<p><strong>WhyYouAre</strong></p>\n<p>是的</p>\n<p>主要是让买的时候的支付要能给创作者</p>\n<p><strong>garfield550</strong></p>\n<p>嗯，是。**</p>\n<p><strong>WhyYouAre</strong></p>\n<p>如果游戏名/id 这个关键信息只在服务器，就有黑幕了</p>\n<p>所以一定要在合约的</p>\n<p>就是原始意义的以游戏为单位的账本</p>\n<p>另外如果用 1155，确认一下 metadataURI 指到什么地方</p>\n<p>常见的做法那个 id 是个自增的东西吧</p>\n<p><strong>garfield550</strong></p>\n<p>是自增。</p>\n<p><strong>WhyYouAre</strong></p>\n<p>确定这些东西能满足我们需求的话，剩下的部分应该是有比较成熟的方案，能串起来就好了</p>\n<p><strong>garfield550</strong></p>\n<p>嗯，下周调研和应用这些。</p>\n<p>这周剩下的时间我去看看那些 NFT 1155 的平台是怎么做的。</p>\n<p>对 1155 的一些需要的东西整理一下，比如合约结构， metadata server 之类的。</p>\n<p><strong>WhyYouAre</strong></p>\n<p>签出 jwt 的时候 aud 按 nft 情况来</p>\n<p><strong>这个再加上 refresh 机制 + 监听事件的话，aud 也能算比较实时了。jwt 可以设置得有效期特别短。比如 1 分钟，就算把 NFT 卖了，确实还能多访问到 1 分钟，在这个场景下也还可以接受</strong></p>\n<p><strong>garfield550</strong></p>\n<p>1 分钟属实有点短。**</p>\n<p><strong>WhyYouAre</strong></p>\n<p>这个模式如果改出类似订阅制，就是发有效期和订阅周期匹配的 jwt 就行</p>\n<blockquote>\n<p><a href=\"https://matrix.to/#/!ubeXIjrjxOOHqRyCaI:matrix.org/$D4nj9p6vVj8dDzhkEbxTCkUCNn0_dvdotQlu1PBUBnY?via=matrix.org\">garfield550<strong>1 分钟属实有点短。</strong></a></p>\n</blockquote>\n<p><strong>是，举个比较极端的例子</strong></p>\n<p>一般的 15～30 分钟在这个场景下也没所谓的，其实让玩家卖了还能玩一会儿未必是什么坏事</p>\n<p>** garfield550 **</p>\n<p>对 1155 的一些需要的东西整理一下，比如合约结构， metadata server 之类的。</p>\n<p>metadata-server 如果挂了 metadata 就拿不到也挺那啥的了。所以应该是能通过某种治理修改，然后实现是开源的 gateway</p>\n<p><strong>garfield550</strong></p>\n<p>我印象里别人的实现就是一个 ID 对应 IPFS CID 的表。**</p>\n<p><strong>WhyYouAre</strong></p>\n<blockquote>\n<p><a href=\"https://matrix.to/#/!ubeXIjrjxOOHqRyCaI:matrix.org/$rmg8Zjh4P_FY2u95TajIbY1_8DKSw3EovDy7_U_znd4?via=matrix.org\">garfield550<strong>我印象里别人的实现就是一个 ID 对应 IPFS CID 的表。</strong></a></p>\n</blockquote>\n<p>应该是。gateway 只负责 map 到 IPFS/arweave 这样永在网。比如 W3ITCH 交给社区/DAO 了，投票决定用 metadata.w3itch.xyz 之类的了，产生修改了，然后社区去把这个服务器搭起来，DNS 啥的搞好</p>\n<p><strong>garfield550</strong></p>\n<p>metadata 是 IPFS 的 CID 存储的，然后 metadata-server 是一个按照 1155 ID 匹配 CID 的服务器。</p>\n<p><strong>WhyYouAre</strong></p>\n<p>而且这个信息是可以一直公开的</p>\n<blockquote>\n<p><a href=\"https://matrix.to/#/!ubeXIjrjxOOHqRyCaI:matrix.org/$X3sE8cOIzpHY85-mCtG_83c6CqzUTz_p4tnt-NWW7Xk?via=matrix.org\">garfield550<strong>metadata 是 IPFS 的 CID 存储的，然后 metadata-server 是一个按照 1155 ID 匹配 CID 的服务器。</strong></a></p>\n</blockquote>\n<p><strong>是</strong></p>\n<p>只是因为链不好做索引所以需要这种服务器，里面的 id-&gt;cid 数据公开也是正常的 🤔</p>\n<p><strong>garfield550</strong></p>\n<p>虽然 maven 的 metadata 是在 MySQL 里的（</p>\n<p><strong>WhyYouAre</strong></p>\n<p>比如 id-&gt;cid 同时也写到链里去了，服务器本身开源，初始化的时候从链数据重新构建数据库/缓存也是可以的</p>\n<p>这样其实另外搭建和 1155 配套的 metadata server 都是可以的，只是合约里的 metadataURI 没指过来而已</p>\n","categories":[],"tags":[]}